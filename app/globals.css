@import "tailwindcss";

@custom-variant dark (&:where(.dark, .dark *));

@layer base {
  body {
    background-color: white;
    color: #0f172a;
    font-family: var(--font-inter), system-ui, sans-serif;
    font-feature-settings: "rlig" 1, "calt" 1;
  }

  .dark body {
    background-color: #0f172a;
    color: #f1f5f9;
  }

  html {
    scroll-behavior: smooth;
  }

  /* Disable smooth scrolling for users who prefer reduced motion */
  @media (prefers-reduced-motion: reduce) {
    html {
      scroll-behavior: auto;
    }
  }
}

/* Motion accessibility: Disable animations for users who prefer reduced motion */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* Performance: Only animate transform and opacity properties */
@layer utilities {
  .animate-safe {
    animation-duration: 0.3s;
    animation-timing-function: ease-out;
  }

  .transition-safe {
    transition-property: transform, opacity;
    transition-duration: 0.2s;
    transition-timing-function: ease-out;
  }

  /* Hardware acceleration for transforms */
  .will-change-transform {
    will-change: transform;
  }

  .will-change-opacity {
    will-change: opacity;
  }

  /* Ensure animations are interruptible */
  .animate-spin,
  .animate-pulse {
    animation-play-state: running;
  }

  /* Proper transform-origin for scale animations */
  .hover\:scale-105:hover {
    transform-origin: center center;
  }

  /* SVG hardware acceleration wrapper */
  .svg-hw-accelerated {
    transform: translateZ(0);
    backface-visibility: hidden;
  }

  /* Typography improvements */
  .tabular-nums {
    font-variant-numeric: tabular-nums;
  }

  /* Non-breaking space utility for units */
  .nbsp {
    white-space: nowrap;
  }
}


/* Content visibility optimization for large lists (>50 items) */
@layer utilities {
  .content-visibility-auto {
    content-visibility: auto;
  }
}

/* Accessibility: Focus-visible styles for keyboard navigation */
/* Requirements: 11.2 - Visible focus indicators with sufficient contrast */
@layer base {
  /* Remove default outline for all elements */
  *:focus {
    outline: none;
  }

  /* Add visible focus indicator for keyboard navigation only */
  *:focus-visible {
    outline: 2px solid #3b82f6; /* blue-500 */
    outline-offset: 2px;
    border-radius: 0.25rem;
  }

  /* Dark mode focus indicator */
  .dark *:focus-visible {
    outline-color: #60a5fa; /* blue-400 */
  }

  /* Enhanced focus for interactive elements */
  button:focus-visible,
  a:focus-visible,
  input:focus-visible,
  textarea:focus-visible,
  select:focus-visible,
  [role="button"]:focus-visible,
  [role="link"]:focus-visible,
  [tabindex]:focus-visible {
    outline: 2px solid #3b82f6;
    outline-offset: 2px;
    box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1);
  }

  .dark button:focus-visible,
  .dark a:focus-visible,
  .dark input:focus-visible,
  .dark textarea:focus-visible,
  .dark select:focus-visible,
  .dark [role="button"]:focus-visible,
  .dark [role="link"]:focus-visible,
  .dark [tabindex]:focus-visible {
    outline-color: #60a5fa;
    box-shadow: 0 0 0 4px rgba(96, 165, 250, 0.1);
  }

  /* Icon-only buttons need larger focus rings */
  .icon-button:focus-visible {
    outline: 2px solid #2563eb; /* blue-600 */
    outline-offset: 2px;
    box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.15);
  }

  .dark .icon-button:focus-visible {
    outline-color: #60a5fa;
    box-shadow: 0 0 0 4px rgba(96, 165, 250, 0.15);
  }
}

/* Accessibility: Screen reader only content */
@layer utilities {
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
  }

  .sr-only-focusable:focus,
  .sr-only-focusable:active {
    position: static;
    width: auto;
    height: auto;
    overflow: visible;
    clip: auto;
    white-space: normal;
  }
}
