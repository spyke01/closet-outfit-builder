@import "tailwindcss";

@custom-variant dark (&:where(.dark, .dark *));

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card: var(--card);
  --color-border: var(--border);
  --color-app-surface: var(--app-surface);
  --color-app-nav-border-active: var(--app-nav-border-active);
  --color-app-nav-border-strong: var(--app-nav-border-strong);
  --color-app-weather-badge-bg: var(--app-weather-badge-bg);
  --color-app-weather-badge-border: var(--app-weather-badge-border);
  --color-app-badge-bg: var(--app-badge-bg);
  --color-app-badge-text: var(--app-badge-text);
  --color-app-badge-border: var(--app-badge-border);
  --color-ring: var(--ring);
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);
}

@layer base {
  :root {
    --font-inter: "Inter", "Avenir Next", "Segoe UI", "Helvetica Neue", Arial, sans-serif;
    --font-playfair-display: "Iowan Old Style", "Palatino Linotype", "Book Antiqua", Palatino, Georgia, serif;
    --font-geist-sans: "Segoe UI", "Helvetica Neue", Arial, sans-serif;
    --background: #F3F5F8;
    --foreground: #231F20;
    --card: #FFFFFF;
    --border: #D4DBE4;
    --app-surface: #F3F5F8;
    --app-nav-border-strong: #C6D0DC;
    --app-nav-border-active: #7A8EA6;
    --app-weather-badge-bg: #EEF2F6;
    --app-weather-badge-border: #D2DBE7;
    --app-badge-bg: #EAF0F7;
    --app-badge-text: #34485F;
    --app-badge-border: #D2DDEA;
    --ring: #194957;
    --primary: #194957;
    --primary-foreground: #FFFFFF;
    --secondary: #D49E7C;
    --secondary-foreground: #231F20;
    --muted: #F7E9CF;
    --muted-foreground: #5C544B;
    --accent: #E5BFA3;
    --accent-foreground: #231F20;
    --destructive: #EF4444;
    --destructive-foreground: #FFFFFF;
    --button-primary: #194957;
    --button-secondary: #D49E7C;
  }

  .dark {
    --background: #1A2830;
    --foreground: #E8F0F2;
    --card: #233A45;
    --border: #2D4A58;
    --app-surface: #16222A;
    --app-nav-border-strong: #36505F;
    --app-nav-border-active: #6F8799;
    --app-weather-badge-bg: #22333F;
    --app-weather-badge-border: #304957;
    --app-badge-bg: #273A47;
    --app-badge-text: #D2DEE8;
    --app-badge-border: #3A5262;
    --ring: #D49E7C;
    --primary: #D49E7C;
    --primary-foreground: #231F20;
    --secondary: #5A97AC;
    --secondary-foreground: #1A2830;
    --muted: #223640;
    --muted-foreground: #BFD2D9;
    --accent: #5A97AC;
    --accent-foreground: #1A2830;
    --destructive: #EF4444;
    --destructive-foreground: #FFFFFF;
    --button-primary: #D49E7C;
    --button-secondary: #5A97AC;
  }

  body {
    @apply bg-background text-foreground;
    font-family: var(--font-inter), system-ui, sans-serif;
    font-feature-settings: "rlig" 1, "calt" 1;
  }

  html {
    scroll-behavior: smooth;
  }

  /* Disable smooth scrolling for users who prefer reduced motion */
  @media (prefers-reduced-motion: reduce) {
    html {
      scroll-behavior: auto;
    }
  }
}

/* Motion accessibility: Disable animations for users who prefer reduced motion */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* Performance: Only animate transform and opacity properties */
@layer utilities {
  .animate-safe {
    animation-duration: 0.3s;
    animation-timing-function: ease-out;
  }

  .transition-safe {
    transition-property: transform, opacity;
    transition-duration: 0.2s;
    transition-timing-function: ease-out;
  }

  /* Hardware acceleration for transforms */
  .will-change-transform {
    will-change: transform;
  }

  .will-change-opacity {
    will-change: opacity;
  }

  /* Ensure animations are interruptible */
  .animate-spin,
  .animate-pulse {
    animation-play-state: running;
  }

  /* Proper transform-origin for scale animations */
  .hover\:scale-105:hover {
    transform-origin: center center;
  }

  /* SVG hardware acceleration wrapper */
  .svg-hw-accelerated {
    transform: translateZ(0);
    backface-visibility: hidden;
  }

  /* Typography improvements */
  .tabular-nums {
    font-variant-numeric: tabular-nums;
  }

  /* Non-breaking space utility for units */
  .nbsp {
    white-space: nowrap;
  }
}


/* Content visibility optimization for large lists (>50 items) */
@layer utilities {
  .content-visibility-auto {
    content-visibility: auto;
  }
}

/* Accessibility: Focus-visible styles for keyboard navigation */
/* Requirements: 11.2 - Visible focus indicators with sufficient contrast */
@layer base {
  /* Remove default outline for all elements */
  *:focus {
    outline: none;
  }

  /* Add visible focus indicator for keyboard navigation only */
  *:focus-visible {
    outline: 2px solid var(--ring);
    outline-offset: 2px;
    border-radius: 0.25rem;
  }

  /* Enhanced focus for interactive elements */
  button:focus-visible,
  a:focus-visible,
  input:focus-visible,
  textarea:focus-visible,
  select:focus-visible,
  [role="button"]:focus-visible,
  [role="link"]:focus-visible,
  [tabindex]:focus-visible {
    outline: 2px solid var(--ring);
    outline-offset: 2px;
    box-shadow: 0 0 0 4px color-mix(in srgb, var(--ring) 15%, transparent);
  }

  /* Icon-only buttons need larger focus rings */
  .icon-button:focus-visible {
    outline: 2px solid var(--ring);
    outline-offset: 2px;
    box-shadow: 0 0 0 4px color-mix(in srgb, var(--ring) 20%, transparent);
  }
}

/* Accessibility: Screen reader only content */
@layer utilities {
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
  }

  .sr-only-focusable:focus,
  .sr-only-focusable:active {
    position: static;
    width: auto;
    height: auto;
    overflow: visible;
    clip: auto;
    white-space: normal;
  }
}
